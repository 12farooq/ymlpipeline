name: ssh pipelines

on:
  push:
    branches:
      - main

jobs:
  ssh-pipelines:
    runs-on: ubuntu-latest

    steps:
      - name: ssh pipelines
        uses: farooq.ahmad@192.168.1.3:/volume1/git/techpath/server.git@main  # Replace with the correct branch or tag name

        # Define environment variables
        env:
          WELCOME: "ssh pipeline"

        # Define input parameters for the action
        with:
          host: ${{ hub.techpath.pro }}  # Replace with the correct secret
          user: ${{ farooq.ahmad }}  # Replace with the correct secret
          pass: ${{ G]Rv$8W8 }}  # Replace with the correct secret
          port: ${{ 22 }}  # Replace with the correct secret
          connect_timeout: 10s

          # Provide valid shell commands in the script
          script: |
            (rm -rf /home/github/test || true)
            ls -la  
            echo $WELCOME 
            mkdir -p /home/github/test/test1 &&
            mkdir -p /home/github/test/test2 &&

            # Add, commit, and push changes to Git
            git config --global user.email "Farooq@techpat.biz
            git config --global user.name "Farooq"
            git init
            git add .
            git commit -m "Commit message"
            git remote add origin ssh://farooq.ahmad@192.168.1.3:/volume1/git/techpath/server.git
            git branch -M main
            git push -u origin main
